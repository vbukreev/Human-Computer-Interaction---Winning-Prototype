<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Quizey home – pick your quiz, track progress, and explore themes.">
    <title>Quizey | Home</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@500;700&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-top: #c8b8ff;
            --bg-bottom: #b3e6ff;
            --card-shadow: 0 18px 36px rgba(33, 43, 72, 0.12);
            --pill-shadow: 0 10px 24px rgba(62, 93, 141, 0.18);
            --text-strong: #0f172a;
            --text-muted: #526275;
            --pill: linear-gradient(120deg, #66d3ff, #9c6bff);
            --pill-2: linear-gradient(120deg, #ffb347, #ff7ecd);
            --green: #20d08c;
        }
        * { box-sizing: border-box; }
        html, body { height: 100%; }
        body {
            margin: 0;
            font-family: 'Nunito', system-ui, -apple-system, sans-serif;
            color: var(--text-strong);
            background: radial-gradient(circle at 10% 20%, rgba(255,255,255,0.45), transparent 35%),
                        radial-gradient(circle at 80% 0%, rgba(255,255,255,0.35), transparent 40%),
                        linear-gradient(180deg, #c7b9ff 0%, #c0c7ff 38%, #b9ddff 100%);
            background-attachment: fixed;
            background-repeat: no-repeat;
            padding: clamp(20px, 3vw, 32px) clamp(20px, 3vw, 32px) 12px;
            position: relative;
            overflow-x: hidden;
        }
        .reduce-motion *, .reduce-motion *::before, .reduce-motion *::after {
            animation: none !important;
            transition: none !important;
            scroll-behavior: auto !important;
        }
        body::before, body::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            filter: blur(70px);
            opacity: 0.22;
            z-index: 0;
        }
        body::before {
            width: 480px;
            height: 480px;
            background: #9fd4ff;
            top: -240px;
            left: -180px;
            position: fixed;
        }
        body::after {
            width: 420px;
            height: 420px;
            background: #d0afff;
            bottom: -220px;
            right: -180px;
            position: fixed;
        }
        .page {
            position: relative;
            z-index: 1;
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 18px;
            min-height: 100vh;
        }
        header {
            display: grid;
            gap: 12px;
        }
        .top-bar {
            display: grid;
            grid-template-columns: auto 1fr auto;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: rgba(255,255,255,0.92);
            border-radius: 18px;
            box-shadow: var(--pill-shadow);
            border: 1px solid rgba(255,255,255,0.6);
            backdrop-filter: blur(10px);
        }
        .brand {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-family: 'Baloo 2', cursive;
            font-size: 24px;
            font-weight: 700;
            color: #7c3aed;
        }
        .brand .icon {
            width: 34px;
            height: 34px;
            border-radius: 12px;
            background: var(--pill);
            display: grid;
            place-items: center;
            color: #ffe58a;
            box-shadow: 0 8px 16px rgba(126, 58, 237, 0.25);
        }
        nav {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        .nav-pill {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 14px;
            border-radius: 12px;
            background: rgba(99, 102, 241, 0.08);
            border: 1px solid rgba(15, 23, 42, 0.06);
            color: var(--text-strong);
            font-weight: 700;
            font-size: 14px;
            text-decoration: none;
            transition: transform 0.15s ease, box-shadow 0.2s ease, background 0.2s ease;
        }
        .nav-pill:focus-visible, .start-btn:focus-visible, .create-account:focus-visible, .edit-btn:focus-visible, .question-card:focus-visible {
            outline: 3px solid rgba(102, 211, 255, 0.9);
            outline-offset: 2px;
        }
        .nav-pill:hover { transform: translateY(-2px); box-shadow: 0 8px 16px rgba(15,23,42,0.12); background: rgba(255,255,255,0.9); }
        .nav-pill.is-active {
            background: var(--pill);
            color: #0f172a;
            box-shadow: 0 10px 22px rgba(120,116,255,0.25);
        }
        .icon-btn {
            width: 40px;
            height: 40px;
            border-radius: 14px;
            border: 1px solid rgba(15, 23, 42, 0.08);
            background: rgba(255,255,255,0.95);
            display: grid;
            place-items: center;
            cursor: pointer;
            box-shadow: 0 8px 14px rgba(15,23,42,0.12);
        }
        .create-account {
            border: none;
            padding: 10px 16px;
            border-radius: 14px;
            background: var(--pill-2);
            color: #0f172a;
            font-weight: 800;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(255,126,205,0.25);
        }
        .ticker {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .chip {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 14px;
            background: rgba(255,255,255,0.92);
            border-radius: 12px;
            border: 1px solid rgba(15,23,42,0.06);
            box-shadow: 0 8px 18px rgba(15,23,42,0.10);
            font-weight: 700;
            color: var(--text-strong);
        }
        .hero {
            text-align: center;
            margin-top: 8px;
        }
        .hero h1 {
            font-family: 'Baloo 2', cursive;
            font-size: clamp(26px, 5vw, 42px);
            margin: 8px 0 12px;
        }
        .hero p {
            margin: 0;
            color: var(--text-muted);
            font-weight: 600;
        }
        .hero-stats {
            margin: 16px auto 4px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            max-width: 760px;
        }
        .stat {
            padding: 14px 12px;
            background: rgba(255,255,255,0.9);
            border-radius: 14px;
            box-shadow: 0 12px 22px rgba(33,43,72,0.12);
            border: 1px solid rgba(255,255,255,0.8);
        }
        .stat span {
            display: block;
            font-size: 13px;
            letter-spacing: 0.04em;
            text-transform: uppercase;
            color: var(--text-muted);
        }
        .stat strong {
            font-size: 22px;
            color: var(--text-strong);
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 16px;
        }
        .feature-card {
            padding: 26px 22px;
            background: rgba(255,255,255,0.9);
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(255,255,255,0.75);
            position: relative;
            overflow: hidden;
            isolation: isolate;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .feature-card::after {
            content: '';
            position: absolute;
            inset: -10% -20%;
            background: radial-gradient(circle at 20% 20%, rgba(255,255,255,0.55), transparent 45%);
            opacity: 0.75;
            z-index: 0;
        }
        .feature-card:hover { transform: translateY(-6px); box-shadow: 0 22px 36px rgba(33, 43, 72, 0.16); }
        .feature-icon {
            width: 58px;
            height: 58px;
            border-radius: 16px;
            background: linear-gradient(135deg, #7dd3fc, #60a5fa);
            display: grid;
            place-items: center;
            font-size: 26px;
            margin-bottom: 12px;
            position: relative;
            z-index: 1;
        }
        .feature-card h3 {
            margin: 0 0 8px;
            font-size: 22px;
            position: relative;
            z-index: 1;
        }
        .feature-card p {
            margin: 0;
            color: var(--text-muted);
            position: relative;
            z-index: 1;
            line-height: 1.5;
        }
        .feature-card.theme { background: linear-gradient(160deg, rgba(255,255,255,0.96), rgba(244,238,255,0.95)); }
        .feature-card.leader { background: linear-gradient(160deg, rgba(255,255,255,0.96), rgba(232,243,255,0.95)); }
        .feature-card.questions { background: linear-gradient(160deg, rgba(255,255,255,0.96), rgba(224,249,255,0.95)); }
        .dashboard {
            margin-top: 8px;
            display: grid;
            gap: 16px;
        }
        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 800;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-size: 13px;
        }
        .progress-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 14px;
        }
        .progress-card {
            padding: 18px 18px;
            background: rgba(255,255,255,0.95);
            border-radius: 18px;
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(255,255,255,0.8);
            display: grid;
            gap: 8px;
        }
        .progress-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-weight: 700;
        }
        .progress-value {
            font-size: 28px;
            font-weight: 800;
        }
        .progress-bar {
            height: 8px;
            border-radius: 999px;
            background: rgba(15,23,42,0.08);
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            border-radius: inherit;
            background: linear-gradient(120deg, #7dd3fc, #a78bfa);
            width: 83%;
        }
        .quiz-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 14px;
        }
        .quiz-card {
            padding: 18px 18px 16px;
            border-radius: 18px;
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(255,255,255,0.8);
            background: linear-gradient(160deg, rgba(255,255,255,0.95), rgba(244,249,255,0.9));
            display: grid;
            gap: 10px;
            transition: transform 0.18s ease, box-shadow 0.18s ease;
            position: relative;
        }
        .quiz-card:hover { transform: translateY(-6px); box-shadow: 0 24px 36px rgba(33,43,72,0.16); }
        .quiz-card .tag {
            width: 42px;
            height: 42px;
            border-radius: 14px;
            display: grid;
            place-items: center;
            font-size: 20px;
            background: rgba(255,255,255,0.9);
            box-shadow: 0 6px 14px rgba(15,23,42,0.12);
        }
        .quiz-card h4 {
            margin: 0;
            font-size: 18px;
        }
        .quiz-card p {
            margin: 0;
            color: var(--text-muted);
            line-height: 1.5;
        }
        .quiz-card .meta { font-weight: 700; color: #66758a; font-size: 13px; }
        .start-btn {
            margin-top: 4px;
            justify-self: start;
            padding: 10px 16px;
            border-radius: 12px;
            border: none;
            font-weight: 800;
            color: #0f172a;
            background: linear-gradient(120deg, #66d3ff, #6d83ff);
            cursor: pointer;
            box-shadow: 0 10px 18px rgba(62,93,141,0.18);
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        .start-btn.alt { background: linear-gradient(120deg, #ffb347, #ff7e67); }
        .start-btn.pink { background: linear-gradient(120deg, #ff9de1, #a78bfa); }
        .start-btn.green { background: linear-gradient(120deg, #9ef3c5, #43d3a2); }
        .edit-btn {
            justify-self: start;
            padding: 8px 12px;
            border-radius: 10px;
            border: 1px solid rgba(15,23,42,0.12);
            background: rgba(255,255,255,0.9);
            font-weight: 700;
            cursor: pointer;
        }
        .pill-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 12px;
        }
        .pill-card {
            background: rgba(255,255,255,0.92);
            border-radius: 16px;
            padding: 18px 18px;
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(255,255,255,0.75);
        }
        .pill-card h4 { margin: 0 0 6px; }
        .pill-card p { margin: 0; color: var(--text-muted); line-height: 1.5; }
        .testimonial-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 14px;
        }
        .testimonial {
            padding: 18px;
            background: rgba(255,255,255,0.9);
            border-radius: 16px;
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(255,255,255,0.75);
        }
        .testimonial p { margin: 0 0 10px; line-height: 1.5; color: var(--text-muted); }
        .testimonial strong { color: var(--text-strong); }
        .cta {
            margin: 6px 0 0;
            padding: 22px 22px;
            background: linear-gradient(120deg, #9fddff, #bca9ff);
            border-radius: 18px;
            box-shadow: 0 16px 30px rgba(111,134,214,0.25);
            color: #0f172a;
        }
        .cta h3 { margin: 0 0 8px; font-size: 24px; }
        .cta p { margin: 0 0 12px; color: #0f172a; }
        .cta-actions { display: flex; flex-wrap: wrap; gap: 10px; align-items: center; }
        .newsletter {
            margin-top: 18px;
            padding: 20px 20px;
            background: rgba(255,255,255,0.94);
            border-radius: 18px;
            border: 1px solid rgba(255,255,255,0.8);
            box-shadow: 0 14px 26px rgba(33,43,72,0.12);
            display: grid;
            gap: 10px;
        }
        .newsletter h4 { margin: 0; font-size: 18px; }
        .newsletter p { margin: 0; color: var(--text-muted); }
        .newsletter form { display: flex; flex-wrap: wrap; gap: 10px; }
        .newsletter input {
            flex: 1 1 220px;
            min-width: 0;
            padding: 12px 14px;
            border-radius: 12px;
            border: 1px solid rgba(15,23,42,0.12);
            font-weight: 700;
            background: rgba(255,255,255,0.96);
        }
        .newsletter button {
            padding: 12px 16px;
            border-radius: 12px;
            border: none;
            font-weight: 800;
            cursor: pointer;
            background: linear-gradient(120deg, #66d3ff, #9c6bff);
            color: #0f172a;
            box-shadow: 0 10px 18px rgba(120,116,255,0.22);
        }
        .footer {
            margin-top: auto;
            padding: 14px 0 10px;
            border-top: 1px solid rgba(15,23,42,0.08);
            color: var(--text-muted);
            display: grid;
            gap: 8px;
            text-align: center;
        }
        .footer-links { display: flex; justify-content: center; gap: 16px; flex-wrap: wrap; font-weight: 700; }
        .footer-links a { color: var(--text-strong); text-decoration: none; }
        .footer-note { margin: 0; color: var(--text-muted); font-weight: 600; }
        .modal {
            position: fixed;
            inset: 0;
            background: rgba(15,23,42,0.35);
            backdrop-filter: blur(6px);
            display: grid;
            place-items: center;
            padding: 16px;
            z-index: 50;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s ease, visibility 0.2s ease;
        }
        .modal.is-open { opacity: 1; visibility: visible; }
        .modal-card {
            width: min(480px, 100%);
            background: rgba(255,255,255,0.98);
            border-radius: 18px;
            box-shadow: 0 20px 40px rgba(33,43,72,0.22);
            border: 1px solid rgba(255,255,255,0.85);
            padding: 20px 20px 18px;
            display: grid;
            gap: 12px;
        }
        .modal-header { display: flex; justify-content: space-between; align-items: center; gap: 10px; }
        .modal-title { margin: 0; font-size: 22px; font-family: 'Baloo 2', cursive; }
        .close-btn {
            border: none;
            background: rgba(15,23,42,0.06);
            width: 32px; height: 32px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 800;
        }
        .form-grid { display: grid; gap: 10px; }
        .form-row { display: grid; gap: 6px; }
        .form-row label { font-weight: 800; color: var(--text-strong); }
        .form-row input, .form-row select {
            padding: 12px 14px;
            border-radius: 12px;
            border: 1px solid rgba(15,23,42,0.12);
            font-weight: 700;
            background: rgba(255,255,255,0.96);
        }
        .role-select { display: flex; gap: 10px; flex-wrap: wrap; }
        .role-select label {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 10px 12px;
            border-radius: 12px;
            border: 1px solid rgba(15,23,42,0.12);
            background: rgba(15,23,42,0.04);
            cursor: pointer;
            font-weight: 700;
        }
        .role-select input { accent-color: #9c6bff; }
        .modal-actions { display: flex; justify-content: space-between; align-items: center; gap: 10px; flex-wrap: wrap; }
        .primary-btn {
            padding: 12px 16px;
            border-radius: 12px;
            border: none;
            font-weight: 800;
            cursor: pointer;
            background: linear-gradient(120deg, #66d3ff, #9c6bff);
            color: #0f172a;
            box-shadow: 0 10px 18px rgba(120,116,255,0.22);
        }
        .ghost-btn {
            padding: 10px 12px;
            border-radius: 10px;
            border: 1px solid rgba(15,23,42,0.12);
            background: rgba(255,255,255,0.9);
            font-weight: 700;
            cursor: pointer;
        }
        @media (max-width: 720px) {
            body { padding: 18px 14px 38px; }
            .top-bar { grid-template-columns: 1fr; justify-items: start; }
            nav { justify-content: flex-start; }
            .auth { justify-self: flex-end; }
            .feature-grid, .quiz-grid, .progress-row { grid-template-columns: 1fr; }
            .hero h1 { font-size: 28px; }
        }
    </style>
</head>
<body>
    <a href="#main" class="skip-link" style="position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden;z-index:100;background:#0f172a;color:#fff;padding:10px 14px;border-radius:12px;">Skip to main content</a>
    <div class="page" id="top">
        <header>
            <div class="top-bar">
                <div class="brand">
                    <span class="icon">💡</span>
                    Quizey
                </div>
                <nav aria-label="Primary">
                    <a class="nav-pill is-active" href="#top"><span>🏠</span> Home</a>
                    <a class="nav-pill" href="#updates"><span>🔔</span> Notifications</a>
                    <a class="nav-pill" href="#quizzes"><span>❓</span> Quizzes</a>
                    <a class="nav-pill" href="quiz-trivia.html"><span>🎮</span> Trivia Mode</a>
                    <a class="nav-pill" href="#badges"><span>⭐</span> Badges</a>
                </nav>
                <button class="create-account">Login</button>
            </div>
            <div class="ticker" aria-label="Updates" id="updates">
                <span class="chip">🧠 World of Science!</span>
                <span class="chip">🏆 Leaderboard Reset – Season 3 starts today!</span>
                <span class="chip">✨ New theme added: Neon Night Mode</span>
                <span class="chip">📚 500+ new questions added this week</span>
            </div>
        </header>

        <section class="hero" id="main">
            <h1>What would you like to do today?</h1>
            <p id="hero-sub">Jump into a quiz, track your progress, or personalize your space.</p>
            <div class="hero-stats" aria-label="Live stats">
                <div class="stat"><span>Active learners</span><strong>4,820</strong></div>
                <div class="stat"><span>Badges earned</span><strong>12,403</strong></div>
                <div class="stat"><span>Weekly challenges</span><strong>57</strong></div>
            </div>
        </section>

        <section class="feature-grid" aria-label="Quick actions">
            <article class="feature-card questions" id="question-card" role="button" tabindex="0">
                <div class="feature-icon" id="feature-questions-icon">📚</div>
                <h3 id="feature-questions-title">Question Bank</h3>
                <p id="feature-questions-body">Build custom quizzes or choose from thousands of pre-made questions across subjects and difficulty levels.</p>
            </article>
            <article class="feature-card leader">
                <div class="feature-icon">🏆</div>
                <h3 id="feature-leader-title">Leaderboard</h3>
                <p id="feature-leader-body">View top players and friends. Compete globally or within your classroom and track your progress.</p>
            </article>
            <article class="feature-card theme">
                <div class="feature-icon">🎨</div>
                <h3 id="feature-theme-title">Themes</h3>
                <p id="feature-theme-body">Switch between playful classroom looks and polished professional designs to match your vibe.</p>
            </article>
        </section>

        <section class="dashboard" aria-label="Progress and quizzes" id="quizzes">
            <div class="section-title" id="progress-title"><span>📈</span> Your Progress</div>
            <div class="progress-row">
                <div class="progress-card">
                    <div class="progress-top"><span>Quizzes Completed</span><span>✔️</span></div>
                    <div class="progress-value">24</div>
                </div>
                <div class="progress-card">
                    <div class="progress-top"><span>Quizzes Passed</span><span>🎯</span></div>
                    <div class="progress-value" style="color: var(--green);">20</div>
                </div>
                <div class="progress-card">
                    <div class="progress-top"><span>Success Rate</span><span>83%</span></div>
                    <div class="progress-bar"><div class="progress-fill" style="width:83%;"></div></div>
                </div>
            </div>

            <div class="section-title" id="quiz-title"><span>🪜</span> Choose a Quiz</div>
            <div class="quiz-grid" id="quiz-grid"></div>

            <div class="section-title"><span>✨</span> This week</div>
            <div class="pill-row">
                <div class="pill-card">
                    <h4>Weekend Showdown</h4>
                    <p>Earn 2x XP on any Featured quiz run before Sunday midnight.</p>
                </div>
                <div class="pill-card">
                    <h4>Instructor Picks</h4>
                    <p>Fresh question drops in Science and Math every Friday.</p>
                </div>
                <div class="pill-card">
                    <h4>Daily Streaks</h4>
                    <p>Complete one quiz per day to climb the streak leaderboard.</p>
                </div>
            </div>

            <div class="section-title"><span>🌱</span> Learning life</div>
            <div class="pill-row">
                <div class="pill-card">
                    <h4>Squad Builder</h4>
                    <p>Create private study squads with shared practice sets.</p>
                </div>
                <div class="pill-card">
                    <h4>Focus Timer</h4>
                    <p>Stay on track with gentle reminders and pacing tips.</p>
                </div>
                <div class="pill-card">
                    <h4>Accessibility First</h4>
                    <p>High-contrast cards, keyboard shortcuts, and captions everywhere.</p>
                </div>
            </div>

            <div class="section-title" id="badges"><span>💬</span> Learner voices</div>
            <div class="testimonial-grid">
                <article class="testimonial">
                    <p>"Quizey makes every study session feel like a game night. My accuracy is up 38%."</p>
                    <strong>- Jordan, Study Coach</strong>
                </article>
                <article class="testimonial">
                    <p>"The leaderboard sparks friendly rivalries. Catch up if you can!"</p>
                    <strong>- Priya, Club Lead</strong>
                </article>
                <article class="testimonial">
                    <p>"Accessibility mode keeps everyone included—screen readers and keyboard-only flows work great."</p>
                    <strong>- Sam, Accessibility Advocate</strong>
                </article>
            </div>

            <div class="cta">
                <h3 id="cta-title">Ready to push your best score?</h3>
                <p id="cta-body">Create your Quizey profile, sync with your courses, and launch your next quiz run.</p>
                <div class="cta-actions">
                    <a class="start-btn" href="quiz-play.html?subject=featured">Start playing →</a>
                    <a class="nav-pill is-active" href="#top">Back to top</a>
                </div>
            </div>

            <div class="newsletter">
                <h4>Subscribe to the Quizey newsletter</h4>
                <p>Get fresh questions, weekend trivia codes, and theme drops in your inbox.</p>
                <form>
                    <input type="email" name="email" placeholder="you@example.com" aria-label="Email address">
                    <button type="submit">Subscribe</button>
                </form>
            </div>

            <footer class="footer">
                <div class="footer-links">
                    <a href="#top">Back to top</a>
                    <a href="#quizzes">Quizzes</a>
                    <a href="quiz-trivia.html">Trivia Mode</a>
                    <a href="#badges">Badges</a>
                </div>
                <p class="footer-note">© <span id="year"></span> Quizey Labs. All rights reserved.</p>
            </footer>
        </section>
    </div>
    <div class="modal" id="account-modal" role="dialog" aria-modal="true" aria-labelledby="account-title" aria-hidden="true">
        <div class="modal-card">
            <div class="modal-header">
                <h2 class="modal-title" id="account-title">Welcome back</h2>
                <button class="close-btn" type="button" aria-label="Close dialog">×</button>
            </div>
            <div class="role-select" role="group" aria-label="Choose action">
                <label><input type="radio" name="auth" value="login" checked> Login</label>
                <label><input type="radio" name="auth" value="signup"> Create profile</label>
            </div>
            <p style="margin:0; color: var(--text-muted);">Default role is student. Switch to instructor if you're hosting.</p>
            <div class="role-select" role="group" aria-label="Choose account role">
                <label><input type="radio" name="role" value="student" checked> Student</label>
                <label><input type="radio" name="role" value="instructor"> Instructor</label>
            </div>
            <form class="form-grid" id="account-form" novalidate>
                <div class="form-row">
                    <label for="account-email">Email</label>
                    <input id="account-email" type="email" name="email" placeholder="you@example.com" required>
                </div>
                <div class="form-row">
                    <label for="account-password">Password</label>
                    <input id="account-password" type="password" name="password" placeholder="Enter password (min 8 characters)" minlength="8" required>
                </div>
                <div class="form-row" id="confirm-row">
                    <label for="account-confirm">Confirm password</label>
                    <input id="account-confirm" type="password" name="confirm" placeholder="Re-enter password" required>
                </div>
                <div class="form-row" id="school-row">
                    <label for="account-school">School / Organization</label>
                    <input id="account-school" type="text" name="school" placeholder="e.g., Faculty of Science">
                </div>
                <p id="account-error" class="form-error" role="alert" aria-live="assertive" style="margin:0;color:#b91c1c;font-weight:700;display:none;"></p>
                <div class="modal-actions">
                    <button type="button" class="ghost-btn" id="account-cancel">Cancel</button>
                    <button type="submit" class="primary-btn">Create account</button>
                </div>
            </form>
        </div>
    </div>
    <script>
        const year = document.getElementById('year');
        if (year) { year.textContent = String(new Date().getFullYear()); }

        const modal = document.getElementById('account-modal');
        const createBtn = document.querySelector('.create-account');
        const closeBtn = modal ? modal.querySelector('.close-btn') : null;
        const cancelBtn = document.getElementById('account-cancel');
        const accountForm = document.getElementById('account-form');

        const modeCopy = {
            student: {
                hero: 'Jump into a quiz, track your progress, or personalize your space.',
                features: {
                    questions: { title: 'Question Bank', body: 'Build custom quizzes or choose from thousands of pre-made questions across subjects and difficulty levels.', icon: '📚' },
                    leader: { title: 'Leaderboard', body: 'View top players and friends. Compete globally or within your classroom and track your progress.' },
                    theme: { title: 'Themes', body: 'Switch between playful classroom looks and polished professional designs to match your vibe.' }
                },
                progressTitle: 'Your Progress',
                quizTitle: 'Choose a Quiz',
                ctaTitle: 'Ready to push your best score?',
                ctaBody: 'Create your Quizey profile, sync with your courses, and launch your next quiz run.'
            },
            instructor: {
                hero: 'Build and launch course quizzes, track learner progress, and keep content up to date.',
                features: {
                    questions: { title: 'Quiz Builder', body: 'Create and update quizzes for each course you teach. Reuse question banks and set timing.', icon: '🛠️' },
                    leader: { title: 'Progress & Grades', body: 'Monitor scores, completion, and streaks across classes with live dashboards.' },
                    theme: { title: 'Branding & Modes', body: 'Match your course look, enable practice or competitive modes, and manage attempts.' }
                },
                progressTitle: 'Course Analytics',
                quizTitle: 'Course Quizzes',
                ctaTitle: 'Ready to launch your next course quiz?',
                ctaBody: 'Publish quizzes to your class roster, track results, and iterate quickly.'
            }
        };

        const copyTargets = {
            hero: document.getElementById('hero-sub'),
            featureQuestionsTitle: document.getElementById('feature-questions-title'),
            featureQuestionsBody: document.getElementById('feature-questions-body'),
            featureQuestionsIcon: document.getElementById('feature-questions-icon'),
            featureLeaderTitle: document.getElementById('feature-leader-title'),
            featureLeaderBody: document.getElementById('feature-leader-body'),
            featureThemeTitle: document.getElementById('feature-theme-title'),
            featureThemeBody: document.getElementById('feature-theme-body'),
            progressTitle: document.getElementById('progress-title'),
            quizTitle: document.getElementById('quiz-title'),
            ctaTitle: document.getElementById('cta-title'),
            ctaBody: document.getElementById('cta-body')
        };

        function applyMode(mode) {
            const data = modeCopy[mode] || modeCopy.student;
            if (copyTargets.hero) copyTargets.hero.textContent = data.hero;
            if (copyTargets.featureQuestionsTitle) copyTargets.featureQuestionsTitle.textContent = data.features.questions.title;
            if (copyTargets.featureQuestionsBody) copyTargets.featureQuestionsBody.textContent = data.features.questions.body;
            if (copyTargets.featureQuestionsIcon) copyTargets.featureQuestionsIcon.textContent = data.features.questions.icon || '📚';
            if (copyTargets.featureLeaderTitle) copyTargets.featureLeaderTitle.textContent = data.features.leader.title;
            if (copyTargets.featureLeaderBody) copyTargets.featureLeaderBody.textContent = data.features.leader.body;
            if (copyTargets.featureThemeTitle) copyTargets.featureThemeTitle.textContent = data.features.theme.title;
            if (copyTargets.featureThemeBody) copyTargets.featureThemeBody.textContent = data.features.theme.body;
            if (copyTargets.progressTitle) copyTargets.progressTitle.innerHTML = `<span>📈</span> ${data.progressTitle}`;
            if (copyTargets.quizTitle) copyTargets.quizTitle.innerHTML = `<span>🪜</span> ${data.quizTitle}`;
            if (copyTargets.ctaTitle) copyTargets.ctaTitle.textContent = data.ctaTitle;
            if (copyTargets.ctaBody) copyTargets.ctaBody.textContent = data.ctaBody;
            document.body.dataset.role = mode;
        }

        function openModal() {
            if (!modal) return;
            modal.classList.add('is-open');
            modal.setAttribute('aria-hidden', 'false');
            const emailField = modal.querySelector('#account-email');
            if (emailField) emailField.focus();
        }
        function closeModal() {
            if (!modal) return;
            modal.classList.remove('is-open');
            modal.setAttribute('aria-hidden', 'true');
            if (createBtn) createBtn.focus();
        }
        if (createBtn) createBtn.addEventListener('click', openModal);
        if (closeBtn) closeBtn.addEventListener('click', closeModal);
        if (cancelBtn) cancelBtn.addEventListener('click', closeModal);
        if (modal) {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) closeModal();
            });
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modal.classList.contains('is-open')) {
                    closeModal();
                }
            });
        }

        const quizGrid = document.getElementById('quiz-grid');
        const storageKey = 'quizzyCustomQuizzes';

        const baseQuizzes = [
            { id: 'science', title: 'Science', desc: 'Explore the wonders of biology, chemistry, and physics.', meta: '3 questions • Intermediate', tag: '🧪', bg: 'linear-gradient(160deg, #e9f5ff, #f3fbff)', link: 'quiz-detail.html?subject=science' },
            { id: 'history', title: 'History', desc: 'Journey through time and discover past civilizations.', meta: '3 questions • Beginner', tag: '⏱️', bg: 'linear-gradient(160deg, #fff4de, #fff9ec)', link: 'quiz-detail.html?subject=history', btn: 'alt' },
            { id: 'math', title: 'Math', desc: 'Challenge your brain with numbers and equations.', meta: '3 questions • Intermediate', tag: '📐', bg: 'linear-gradient(160deg, #f6edff, #f5f0ff)', link: 'quiz-detail.html?subject=math', btn: 'pink' },
            { id: 'pop', title: 'Pop Culture', desc: 'Music, movies, trends, and everything in between.', meta: '3 questions • Casual', tag: '🎵', bg: 'linear-gradient(160deg, #ffe8f2, #fff0f7)', link: 'quiz-detail.html?subject=pop', btn: 'pink' },
            { id: 'random', title: 'Random', desc: 'Mix it up with a surprise set of questions.', meta: '3 questions • Mixed', tag: '🔀', bg: 'linear-gradient(160deg, #eafff3, #f4fff9)', link: 'quiz-detail.html?subject=random', btn: 'green' },
            { id: 'featured', title: 'Featured', desc: 'Curated quizzes picked for you this week.', meta: '3 questions • Spotlight', tag: '🌟', bg: 'linear-gradient(160deg, #eaf0ff, #f3f7ff)', link: 'quiz-detail.html?subject=featured' }
        ];

        function loadCustomQuizzes() {
            try {
                const raw = localStorage.getItem(storageKey);
                return raw ? JSON.parse(raw) : [];
            } catch {
                return [];
            }
        }

        function ensureQuizExistsInStorage(quiz) {
            const quizzes = loadCustomQuizzes();
            const existing = quizzes.find(q => q.id === quiz.id);
            if (existing) return;
            const countMatch = (quiz.meta || '').match(/(\d+)\s+questions/i);
            const count = countMatch ? parseInt(countMatch[1], 10) : 10;
            const levelMatch = (quiz.meta || '').match(/•\s*([A-Za-z]+)/);
            const level = levelMatch ? levelMatch[1] : 'Intermediate';
            const stub = {
                id: quiz.id,
                title: quiz.title || 'Custom Quiz',
                desc: quiz.desc || 'Edit this quiz to add your own questions.',
                subject: quiz.title || 'Course Quiz',
                count: count || 10,
                level: level,
                questions: [
                    { text: 'Placeholder question', answers: ['Answer A', 'Answer B'], correct: 0 }
                ]
            };
            quizzes.push(stub);
            localStorage.setItem(storageKey, JSON.stringify(quizzes));
        }

        function renderQuizzes(mode) {
            if (!quizGrid) return;
            quizGrid.innerHTML = '';
            const customs = loadCustomQuizzes();
            const all = [...baseQuizzes, ...customs.map(q => ({
                id: q.id,
                title: q.title,
                desc: q.desc,
                meta: `${q.count || 10} questions • ${q.level || 'Intermediate'}`,
                tag: '🛠️',
                bg: 'linear-gradient(160deg, #eaf7ff, #f5fbff)',
                link: `quiz-play.html?subject=${encodeURIComponent(q.id)}&custom=1`
            }))];
            all.forEach((quiz, index) => {
                const card = document.createElement('article');
                card.className = 'quiz-card';
                card.style.background = quiz.bg;
                const btnClass = quiz.btn ? `start-btn ${quiz.btn}` : 'start-btn';
                card.innerHTML = `
                    <div class="tag">${quiz.tag}</div>
                    <h4>${quiz.title}</h4>
                    <p>${quiz.desc}</p>
                    <div class="meta">${quiz.meta}</div>
                    <a class="${btnClass}" href="${quiz.link}">Start Quiz →</a>
                `;
                if (mode === 'instructor') {
                    const edit = document.createElement('button');
                    edit.className = 'edit-btn';
                    edit.type = 'button';
                    edit.textContent = 'Edit';
                    edit.addEventListener('click', () => {
                        ensureQuizExistsInStorage(quiz);
                        window.open(`quiz-builder.html?edit=${encodeURIComponent(quiz.id)}`, '_blank', 'noopener');
                    });
                    card.appendChild(edit);
                }
                quizGrid.appendChild(card);
            });
        }

        if (accountForm) {
            accountForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const selected = modal.querySelector('input[name="role"]:checked');
                const mode = selected ? selected.value : 'student';
                const authMode = (modal.querySelector('input[name="auth"]:checked') || {}).value || 'login';
                const error = document.getElementById('account-error');
                const email = document.getElementById('account-email');
                const pass = document.getElementById('account-password');
                const confirm = document.getElementById('account-confirm');
                const school = document.getElementById('account-school');
                if (error) { error.style.display = 'none'; error.textContent = ''; }
                if (pass.value.length < 8) {
                    if (error) { error.textContent = 'Password must be at least 8 characters.'; error.style.display = 'block'; }
                    pass.focus();
                    return;
                }
                if (authMode === 'signup' && pass.value !== confirm.value) {
                    if (error) { error.textContent = 'Passwords must match.'; error.style.display = 'block'; }
                    confirm.focus();
                    return;
                }
                if (email && !email.value.trim()) {
                    if (error) { error.textContent = 'Email is required.'; error.style.display = 'block'; }
                    email.focus();
                    return;
                }
                if (authMode === 'signup' && mode === 'instructor' && school && !school.value.trim()) {
                    if (error) { error.textContent = 'School/Organization is required for instructors.'; error.style.display = 'block'; }
                    school.focus();
                    return;
                }
                applyMode(mode);
                renderQuizzes(mode);
                closeModal();
            });
        }

        const roleRadios = modal ? modal.querySelectorAll('input[name="role"]') : [];
        const authRadios = modal ? modal.querySelectorAll('input[name="auth"]') : [];
        const confirmRow = document.getElementById('confirm-row');
        const schoolRow = document.getElementById('school-row');
        const submitBtn = accountForm ? accountForm.querySelector('.primary-btn') : null;

        function updateAuthFields() {
            const authModeNow = (modal.querySelector('input[name="auth"]:checked') || {}).value || 'login';
            const roleVal = (modal.querySelector('input[name="role"]:checked') || {}).value || 'student';
            if (confirmRow) confirmRow.style.display = authModeNow === 'signup' ? 'grid' : 'none';
            if (schoolRow) schoolRow.style.display = authModeNow === 'signup' && roleVal === 'instructor' ? 'grid' : 'none';
            if (submitBtn) submitBtn.textContent = authModeNow === 'signup' ? 'Create profile' : 'Login';
        }
        authRadios.forEach(r => r.addEventListener('change', updateAuthFields));
        roleRadios.forEach(r => {
            r.addEventListener('change', () => {
                applyMode(r.value);
                renderQuizzes(r.value);
                updateAuthFields();
            });
        });

        const initialRole = (document.querySelector('input[name="role"][checked]') || {}).value || 'student';
        applyMode(initialRole);
        renderQuizzes(initialRole);
        updateAuthFields();

        const questionCard = document.getElementById('question-card');
        function goToBuilder() {
            const role = document.body.dataset.role || 'student';
            if (role === 'instructor') {
                window.open('quiz-builder.html', '_blank', 'noopener');
            }
        }
        if (questionCard) {
            questionCard.addEventListener('click', goToBuilder);
            questionCard.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    goToBuilder();
                }
            });
        }
    </script>
</body>
</html>
